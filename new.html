<!DOCTYPE html>

<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Планировщик 24 часов</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

```
    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        background: #f5f5f7;
        min-height: 100vh;
        padding: 40px 20px;
        color: #1d1d1f;
    }

    .container {
        max-width: 1200px;
        margin: 0 auto;
    }

    .header {
        text-align: center;
        margin-bottom: 0;
    }

    .header h1 {
        font-size: 2.5em;
        font-weight: 600;
        color: #1d1d1f;
        margin-bottom: 10px;
    }

    .view-controls {
        display: flex;
        justify-content: flex-end;
        margin-bottom: 20px;
    }

    .view-toggle {
        background: white;
        border: 1px solid #e5e5e7;
        border-radius: 8px;
        padding: 10px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s;
        color: #86868b;
    }

    .view-toggle:hover {
        background: #fafafa;
        border-color: #d2d2d7;
        color: #1d1d1f;
    }

    .view-toggle.active {
        background: #0071e3;
        border-color: #0071e3;
        color: white;
    }

    .view-toggle svg {
        width: 24px;
        height: 24px;
    }

    .balance {
        display: flex;
        justify-content: center;
        align-items: baseline;
        gap: 15px;
        margin-top: 20px;
    }

    .balance-item {
        text-align: center;
    }

    .balance-label {
        font-size: 13px;
        color: #86868b;
        margin-bottom: 5px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .balance-value {
        font-size: 28px;
        font-weight: 600;
        color: #1d1d1f;
    }

    .balance-value.warning {
        color: #ff3b30;
    }

    .balance-subtitle {
        font-size: 14px;
        color: #86868b;
        margin-top: 2px;
    }

    .main-content {
        background: transparent;
        border-radius: 20px;
        padding: 0;
        box-shadow: none;
        margin-bottom: 30px;
    }

    .clock-section {
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 0;
    }

    .legend {
        display: flex;
        flex-direction: column;
        gap: 12px;
        margin-top: 30px;
        padding: 0 20px;
    }

    .legend-item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px 16px;
        background: #fafafa;
        border-radius: 10px;
        transition: background 0.2s;
    }

    .legend-item:hover {
        background: #f0f0f0;
    }

    .legend-color {
        width: 20px;
        height: 20px;
        border-radius: 4px;
        flex-shrink: 0;
    }

    .legend-info {
        flex: 1;
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 15px;
    }

    .legend-name {
        font-size: 15px;
        font-weight: 500;
        color: #1d1d1f;
    }

    .legend-time {
        font-size: 14px;
        color: #86868b;
        white-space: nowrap;
    }

    #clock {
        position: relative;
        width: 800px;
        height: 800px;
        max-width: 90vw;
        max-height: 90vw;
    }

    .clock-face {
        width: 100%;
        height: 100%;
        border-radius: 50%;
        position: relative;
        background: transparent;
    }

    .hour-marker {
        position: absolute;
        width: 2px;
        height: 12px;
        background: #d2d2d7;
        top: 10px;
        left: 50%;
        transform-origin: center 390px;
        margin-left: -1px;
    }

    .hour-label {
        position: absolute;
        font-size: 13px;
        font-weight: 500;
        color: #86868b;
        transform: translate(-50%, -50%);
        z-index: 10;
    }

    .segments-container {
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
    }

    .center-info {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        z-index: 100;
        pointer-events: none;
    }

    .center-label {
        font-size: 12px;
        color: #86868b;
        margin-bottom: 6px;
    }

    .center-value {
        font-size: 32px;
        font-weight: 600;
        color: #1d1d1f;
    }

    .center-subtitle {
        font-size: 13px;
        color: #86868b;
        margin-top: 3px;
    }

    .tasks-section {
        background: white;
        border-radius: 20px;
        padding: 40px;
        box-shadow: 0 2px 20px rgba(0, 0, 0, 0.05);
    }

    .section-title {
        font-size: 22px;
        font-weight: 600;
        margin-bottom: 25px;
        color: #1d1d1f;
    }

    .task-header {
        display: grid;
        grid-template-columns: 40px 1fr 110px 110px 50px;
        gap: 12px;
        padding: 12px 15px;
        font-size: 13px;
        color: #86868b;
        font-weight: 500;
        border-bottom: 1px solid #e5e5e7;
        margin-bottom: 10px;
    }

    .task-item {
        display: grid;
        grid-template-columns: 40px 1fr 110px 110px 50px;
        gap: 12px;
        padding: 15px;
        align-items: center;
        border-radius: 12px;
        transition: background 0.2s;
        margin-bottom: 8px;
    }

    .task-item:hover {
        background: #fafafa;
    }

    .input-wrapper {
        display: flex;
        flex-direction: column;
        gap: 5px;
        width: 100%;
    }

    .input-label {
        font-size: 11px;
        color: #86868b;
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 0.3px;
        display: none;
    }

    .task-item input[type="color"] {
        width: 40px;
        height: 40px;
        border: 1px solid #e5e5e7;
        border-radius: 8px;
        cursor: pointer;
        padding: 2px;
        vertical-align: middle;
    }

    .task-item input[type="text"],
    .task-item input[type="time"],
    .task-item input[type="number"] {
        height: 40px;
        padding: 0 10px;
        border: 1px solid #e5e5e7;
        border-radius: 8px;
        font-size: 14px;
        font-family: inherit;
        transition: all 0.2s;
        background: white;
        width: 100%;
        box-sizing: border-box;
        vertical-align: middle;
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        margin: 0;
        line-height: normal;
        color: #1d1d1f;
    }

    .task-item input[type="text"]:focus,
    .task-item input[type="time"]:focus,
    .task-item input[type="number"]:focus {
        outline: none;
        border-color: #0071e3;
        box-shadow: 0 0 0 3px rgba(0, 113, 227, 0.1);
    }

    .task-item input[type="number"] {
        text-align: center;
    }

    .task-item input[type="time"]:invalid {
        color: #86868b;
    }

    .task-item input[type="time"]::-webkit-datetime-edit-fields-wrapper {
        color: #86868b;
    }

    .task-item input[type="time"]:focus::-webkit-datetime-edit-fields-wrapper {
        color: #1d1d1f;
    }

    .remove-btn {
        background: transparent;
        color: #86868b;
        border: none;
        padding: 8px 12px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 15px;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
        white-space: nowrap;
    }

    .remove-btn:hover {
        background: #fee;
        color: #ff3b30;
    }

    .add-task-btn {
        width: 100%;
        padding: 14px;
        background: #0071e3;
        color: white;
        border: none;
        border-radius: 10px;
        font-size: 15px;
        font-weight: 500;
        cursor: pointer;
        margin-top: 20px;
        transition: background 0.2s;
    }

    .add-task-btn:hover {
        background: #0077ed;
    }

    .export-calendar-btn {
        width: 100%;
        padding: 14px;
        background: #34C759;
        color: white;
        border: none;
        border-radius: 10px;
        font-size: 15px;
        font-weight: 500;
        cursor: pointer;
        margin-top: 15px;
        transition: background 0.2s;
    }

    .export-calendar-btn:hover {
        background: #30b350;
    }

    .export-calendar-btn:disabled {
        background: #d2d2d7;
        cursor: not-allowed;
    }

    .stats-bar {
        display: none;
        gap: 2px;
        height: 40px;
        border-radius: 8px;
        overflow: hidden;
        margin: 30px 0;
    }

    .stats-bar.active {
        display: flex;
    }

    .stat-segment {
        flex: 1;
        min-width: 10px;
        transition: opacity 0.2s;
        cursor: pointer;
    }

    .stat-segment:hover {
        opacity: 0.8;
    }

    @media (max-width: 768px) {
        body {
            padding: 20px 10px;
        }

        #clock {
            width: 80vw;
            height: 80vw;
            max-width: 600px;
            max-height: 600px;
        }

        .hour-marker {
            height: 10px;
            top: 8px;
            transform-origin: center calc(40vw - 8px);
        }

        .main-content {
            padding: 20px 15px;
        }

        .tasks-section {
            padding: 20px 15px;
        }

        .task-header {
            display: none;
        }

        .task-item {
            grid-template-columns: 1fr;
            gap: 15px;
            padding: 20px 15px;
            background: #fafafa;
            margin-bottom: 15px;
        }

        .task-item input[type="text"],
        .task-item input[type="time"],
        .task-item input[type="number"] {
            width: 100%;
        }

        .remove-btn {
            width: 100%;
            padding: 12px;
            background: #fee;
            color: #ff3b30;
        }

        .balance {
            flex-direction: row;
            gap: 8px;
            margin-top: 15px;
        }

        .balance-item {
            flex: 1;
            min-width: 0;
        }

        .balance-label {
            font-size: 9px;
            margin-bottom: 3px;
        }

        .balance-value {
            font-size: 20px;
        }

        .balance-subtitle {
            font-size: 11px;
            margin-top: 1px;
        }

        .header {
            margin-bottom: 25px;
        }

        .header h1 {
            font-size: 1.5em;
            margin-bottom: 5px;
        }
    }
</style>
```

</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Планировщик дня</h1>
            <div class="balance">
                <div class="balance-item">
                    <div class="balance-label">Всего часов</div>
                    <div class="balance-value">24</div>
                </div>
                <div class="balance-item">
                    <div class="balance-label">Использовано</div>
                    <div class="balance-value" id="usedHours">0</div>
                    <div class="balance-subtitle" id="usedPercent">0%</div>
                </div>
                <div class="balance-item">
                    <div class="balance-label">Осталось</div>
                    <div class="balance-value" id="remainingHours">24</div>
                    <div class="balance-subtitle" id="remainingPercent">100%</div>
                </div>
            </div>
        </div>

```
    <div class="main-content">
        <div class="view-controls">
            <button class="view-toggle" id="viewToggle" onclick="toggleView()" title="Переключить вид">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="18" height="4" rx="1"></rect>
                    <rect x="3" y="10" width="18" height="4" rx="1"></rect>
                    <rect x="3" y="17" width="18" height="4" rx="1"></rect>
                </svg>
            </button>
        </div>

        <div id="statsBar" class="stats-bar"></div>

        <div class="clock-section">
            <div id="clock">
                <div class="clock-face" id="clockFace">
                    <div class="center-info">
                        <div class="center-label">Использовано</div>
                        <div class="center-value" id="centerValue">0 ч</div>
                        <div class="center-subtitle" id="centerSubtitle">из 24</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="legend" id="legend"></div>
    </div>

    <div class="tasks-section">
        <div class="section-title">Задачи</div>
        <div class="task-header">
            <div></div>
            <div>Название</div>
            <div>Начало</div>
            <div>Часы</div>
            <div></div>
        </div>
        <div id="tasksList"></div>
        <button class="add-task-btn" onclick="addTask()">Добавить задачу</button>
        <button class="export-calendar-btn" onclick="exportToCalendar()">Добавить в календарь</button>
    </div>
</div>

<script>
    let tasks = [];
    const colors = ['#34C759', '#FF9500', '#FF3B30', '#AF52DE', '#5AC8FA', '#FFCC00', '#FF2D55', '#64D2FF'];
    let colorIndex = 0;

    let currentView = 'clock'; // 'clock' or 'bar'

    function toggleView() {
        const statsBar = document.getElementById('statsBar');
        const clockSection = document.querySelector('.clock-section');
        const legend = document.getElementById('legend');
        const toggleBtn = document.getElementById('viewToggle');

        if (currentView === 'clock') {
            // Switch to bar view
            currentView = 'bar';
            statsBar.classList.add('active');
            clockSection.style.display = 'none';
            legend.style.display = 'none';
            toggleBtn.classList.add('active');
            // Change icon to circle (clock icon)
            toggleBtn.innerHTML = `
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="12 6 12 12 16 14"></polyline>
                </svg>
            `;
        } else {
            // Switch to clock view
            currentView = 'clock';
            statsBar.classList.remove('active');
            clockSection.style.display = 'flex';
            legend.style.display = 'flex';
            toggleBtn.classList.remove('active');
            // Change icon to bars
            toggleBtn.innerHTML = `
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="18" height="4" rx="1"></rect>
                    <rect x="3" y="10" width="18" height="4" rx="1"></rect>
                    <rect x="3" y="17" width="18" height="4" rx="1"></rect>
                </svg>
            `;
        }
    }

    function initClock() {
        const clockFace = document.getElementById('clockFace');
        const clock = document.getElementById('clock');
        
        // Add segments container
        const segmentsContainer = document.createElement('div');
        segmentsContainer.className = 'segments-container';
        segmentsContainer.id = 'segmentsContainer';
        clockFace.appendChild(segmentsContainer);
        
        // Get actual clock size
        const clockSize = clock.offsetWidth;
        const center = clockSize / 2;
        const labelRadius = center * 0.70;
        
        // Add hour markers and labels
        for (let i = 0; i < 24; i++) {
            const marker = document.createElement('div');
            marker.className = 'hour-marker';
            marker.style.transform = `rotate(${i * 15}deg)`;
            clockFace.appendChild(marker);

            const label = document.createElement('div');
            label.className = 'hour-label';
            label.textContent = i;
            const angle = (i * 15 - 90) * Math.PI / 180;
            const x = center + labelRadius * Math.cos(angle);
            const y = center + labelRadius * Math.sin(angle);
            label.style.left = x + 'px';
            label.style.top = y + 'px';
            clockFace.appendChild(label);
        }

        // Start with one empty task
        addTask();
    }

    function addTask() {
        const task = {
            id: Date.now(),
            name: '',
            startTime: '',
            hours: 0,
            color: colors[colorIndex % colors.length]
        };
        colorIndex++;
        tasks.push(task);
        renderTasks();
        updateClock();
    }

    function removeTask(id) {
        tasks = tasks.filter(task => task.id !== id);
        renderTasks();
        updateClock();
    }

    function updateTask(id, field, value) {
        const task = tasks.find(t => t.id === id);
        if (task) {
            task[field] = field === 'hours' ? parseFloat(value) || 0 : value;
            updateClock();
            updateStats();
        }
    }

    function renderTasks() {
        const tasksList = document.getElementById('tasksList');
        tasksList.innerHTML = '';

        tasks.forEach(task => {
            const taskItem = document.createElement('div');
            taskItem.className = 'task-item';
            taskItem.innerHTML = `
                <input type="color" value="${task.color}" onchange="updateTask(${task.id}, 'color', this.value)" title="Выберите цвет">
                <input type="text" placeholder="Название задачи (например: Работа)" value="${task.name}" 
                       oninput="updateTask(${task.id}, 'name', this.value)">
                <input type="time" value="${task.startTime || ''}" placeholder="--:--"
                       oninput="updateTask(${task.id}, 'startTime', this.value)"
                       title="Время начала">
                <input type="number" placeholder="Часов" min="0" max="24" step="0.5" value="${task.hours || ''}"
                       oninput="updateTask(${task.id}, 'hours', this.value)"
                       title="Длительность в часах">
                <button class="remove-btn" onclick="removeTask(${task.id})" title="Удалить">Удалить</button>
            `;
            tasksList.appendChild(taskItem);
        });

        updateStats();
    }

    function updateClock() {
        const segmentsContainer = document.getElementById('segmentsContainer');
        segmentsContainer.innerHTML = '';

        const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
        svg.setAttribute('width', '100%');
        svg.setAttribute('height', '100%');
        svg.setAttribute('viewBox', '0 0 800 800');
        svg.style.position = 'absolute';
        svg.style.top = '0';
        svg.style.left = '0';

        tasks.forEach(task => {
            if (task.hours > 0 && task.hours <= 24) {
                let startHour = 0;
                if (task.startTime) {
                    const [hours, minutes] = task.startTime.split(':').map(Number);
                    startHour = hours + minutes / 60;
                }
                
                const startAngle = (startHour / 24) * 360 - 90;
                const degrees = (task.hours / 24) * 360;
                
                const startAngleRad = startAngle * Math.PI / 180;
                const endAngleRad = (startAngle + degrees) * Math.PI / 180;
                
                const centerX = 400;
                const centerY = 400;
                const radius = 365;
                
                const startX = centerX + radius * Math.cos(startAngleRad);
                const startY = centerY + radius * Math.sin(startAngleRad);
                const endX = centerX + radius * Math.cos(endAngleRad);
                const endY = centerY + radius * Math.sin(endAngleRad);
                
                const largeArcFlag = degrees > 180 ? 1 : 0;
                
                const pathData = [
                    `M ${centerX} ${centerY}`,
                    `L ${startX} ${startY}`,
                    `A ${radius} ${radius} 0 ${largeArcFlag} 1 ${endX} ${endY}`,
                    'Z'
                ].join(' ');
                
                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                path.setAttribute('d', pathData);
                path.setAttribute('fill', task.color);
                path.setAttribute('opacity', '0.85');
                path.setAttribute('stroke', 'white');
                path.setAttribute('stroke-width', '3');
                
                const title = document.createElementNS('http://www.w3.org/2000/svg', 'title');
                const timeInfo = task.startTime ? ` (${task.startTime})` : '';
                title.textContent = `${task.name || 'Без названия'}: ${task.hours} ч${timeInfo}`;
                path.appendChild(title);
                
                svg.appendChild(path);
            }
        });

        segmentsContainer.appendChild(svg);
        updateStats();
    }

    function updateStats() {
        const total = tasks.reduce((sum, task) => sum + (task.hours || 0), 0);
        const remaining = 24 - total;
        const usedPercent = (total / 24) * 100;
        const remainingPercent = (remaining / 24) * 100;

        document.getElementById('usedHours').textContent = total.toFixed(1);
        document.getElementById('usedHours').className = total > 24 ? 'balance-value warning' : 'balance-value';
        document.getElementById('usedPercent').textContent = usedPercent.toFixed(0) + '%';
        
        document.getElementById('remainingHours').textContent = remaining.toFixed(1);
        document.getElementById('remainingHours').className = remaining < 0 ? 'balance-value warning' : 'balance-value';
        document.getElementById('remainingPercent').textContent = (remainingPercent > 0 ? remainingPercent : 0).toFixed(0) + '%';

        document.getElementById('centerValue').textContent = total.toFixed(1) + ' ч';
        document.getElementById('centerSubtitle').textContent = 'из 24';

        // Update stats bar
        const statsBar = document.getElementById('statsBar');
        statsBar.innerHTML = '';
        
        tasks.forEach(task => {
            if (task.hours > 0) {
                const segment = document.createElement('div');
                segment.className = 'stat-segment';
                segment.style.background = task.color;
                segment.style.flex = task.hours;
                segment.title = `${task.name || 'Без названия'}: ${task.hours} ч`;
                statsBar.appendChild(segment);
            }
        });

        // Add empty segment if there's remaining time
        if (remaining > 0) {
            const emptySegment = document.createElement('div');
            emptySegment.className = 'stat-segment';
            emptySegment.style.background = '#e5e5e7';
            emptySegment.style.flex = remaining;
            emptySegment.title = `Свободно: ${remaining.toFixed(1)} ч`;
            statsBar.appendChild(emptySegment);
        }

        // Update legend
        updateLegend();
    }

    function updateLegend() {
        const legend = document.getElementById('legend');
        legend.innerHTML = '';

        const activeTasks = tasks.filter(task => task.hours > 0 && task.name);
        
        if (activeTasks.length === 0) {
            return;
        }

        activeTasks.forEach(task => {
            const legendItem = document.createElement('div');
            legendItem.className = 'legend-item';

            const startTime = task.startTime || '00:00';
            const [hours, minutes] = startTime.split(':').map(Number);
            const startHour = hours + minutes / 60;
            const endHour = (startHour + task.hours) % 24;
            const endHours = Math.floor(endHour);
            const endMinutes = Math.round((endHour - endHours) * 60);
            const endTime = `${String(endHours).padStart(2, '0')}:${String(endMinutes).padStart(2, '0')}`;

            legendItem.innerHTML = `
                <div class="legend-color" style="background: ${task.color}"></div>
                <div class="legend-info">
                    <div class="legend-name">${task.name}</div>
                    <div class="legend-time">${startTime} — ${endTime} (${task.hours} ч)</div>
                </div>
            `;

            legend.appendChild(legendItem);
        });
    }

    function exportToCalendar() {
        const activeTasks = tasks.filter(task => task.hours > 0 && task.name);
        
        if (activeTasks.length === 0) {
            alert('Добавьте хотя бы одну задачу с названием и временем');
            return;
        }

        // Get today's date
        const today = new Date();
        const year = today.getFullYear();
        const month = String(today.getMonth() + 1).padStart(2, '0');
        const day = String(today.getDate()).padStart(2, '0');

        // Generate .ics file content
        let icsContent = 'BEGIN:VCALENDAR\r\nVERSION:2.0\r\nPRODID:-//Планировщик дня//RU\r\n';

        activeTasks.forEach(task => {
            const startTime = task.startTime || '00:00';
            const [hours, minutes] = startTime.split(':').map(Number);
            
            // Calculate end time
            const startHour = hours + minutes / 60;
            const endHour = startHour + task.hours;
            const endHours = Math.floor(endHour);
            const endMinutes = Math.round((endHour - endHours) * 60);

            // Format times for .ics (YYYYMMDDTHHMMSS)
            const startTimeFormatted = `${year}${month}${day}T${String(hours).padStart(2, '0')}${String(minutes).padStart(2, '0')}00`;
            const endTimeFormatted = `${year}${month}${day}T${String(endHours % 24).padStart(2, '0')}${String(endMinutes).padStart(2, '0')}00`;

            icsContent += 'BEGIN:VEVENT\r\n';
            icsContent += `DTSTART:${startTimeFormatted}\r\n`;
            icsContent += `DTEND:${endTimeFormatted}\r\n`;
            icsContent += `SUMMARY:${task.name}\r\n`;
            icsContent += `DESCRIPTION:Длительность: ${task.hours} ч\r\n`;
            icsContent += `UID:${Date.now()}-${Math.random()}@plannerapp\r\n`;
            icsContent += 'END:VEVENT\r\n';
        });

        icsContent += 'END:VCALENDAR';

        // Create blob and download
        const blob = new Blob([icsContent], { type: 'text/calendar;charset=utf-8' });
        const link = document.createElement('a');
        link.href = window.URL.createObjectURL(blob);
        link.download = `plan-${year}-${month}-${day}.ics`;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    }

    function updateLegend() {
        const legend = document.getElementById('legend');
        legend.innerHTML = '';

        const activeTasks = tasks.filter(task => task.hours > 0 && task.name);
        
        if (activeTasks.length === 0) {
            return;
        }

        activeTasks.forEach(task => {
            const legendItem = document.createElement('div');
            legendItem.className = 'legend-item';

            const startTime = task.startTime || '00:00';
            const [hours, minutes] = startTime.split(':').map(Number);
            const startHour = hours + minutes / 60;
            const endHour = (startHour + task.hours) % 24;
            const endHours = Math.floor(endHour);
            const endMinutes = Math.round((endHour - endHours) * 60);
            const endTime = `${String(endHours).padStart(2, '0')}:${String(endMinutes).padStart(2, '0')}`;

            legendItem.innerHTML = `
                <div class="legend-color" style="background: ${task.color}"></div>
                <div class="legend-info">
                    <div class="legend-name">${task.name}</div>
                    <div class="legend-time">${startTime} — ${endTime} (${task.hours} ч)</div>
                </div>
            `;

            legend.appendChild(legendItem);
        });
    }

    initClock();
</script>
```

</body>
</html>